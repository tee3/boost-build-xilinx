# Copyright 2019 Thomas Brown
# Distributed under the Boost Software License, Version 1.0. (See
# accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt)

path-constant root : ../.. ;

project
  : default-build
    <platform>elf--cortex-a53-hard
    <platform>elf--cortex-a53-softfp
    <platform>elf--cortex-a53-soft
    # @todo enable soon
    # <platform>elf--cortex-r5+vfpv3-d16-hard
    <platform>elf--cortex-r5+vfpv3-d16-softfp
    <platform>elf-arm-cortex-a53-hard
    <platform>elf-arm-cortex-a53-softfp
    <platform>elf-arm-cortex-a53-soft
    # @todo required since Xilinx SDK has a bug
    #<platform>elf-arm-cortex-r5+vfpv3-d16-hard
    <platform>elf-arm-cortex-r5+vfpv3-d16-softfp
    <platform>freertos--cortex-a53-hard
    <platform>freertos--cortex-a53-softfp
    <platform>freertos--cortex-a53-soft
    # @todo required since Xilinx SDK has a bug
    # <platform>freertos--cortex-r5+vfpv3-d16-hard
    <platform>freertos--cortex-r5+vfpv3-d16-softfp
    <platform>freertos-arm-cortex-a53-hard
    <platform>freertos-arm-cortex-a53-softfp
    <platform>freertos-arm-cortex-a53-soft
    # @todo required since Xilinx SDK has a bug
    # <platform>freertos-arm-cortex-r5+vfpv3-d16-hard
    <platform>freertos-arm-cortex-r5+vfpv3-d16-softfp

    <xsdk-processor-id>0
    <xsdk-processor-id>1
  : requirements
    <link>static
  ;

explicit ws ;
xsdkws ws
  : # sources
    $(zcu102-hdf)
  : # requirements
  : # default-build
  : # usage-requirements
    <linkflags>"-Wl,-T -Wl,lscript.ld"
  ;

exe complex
  : # sources
    complex.cpp

    h0.hpp
    h0.cpp

    $(root)/test/liba//a

    ws
  : # requirements
    <dependency>ws

    <linkflags>"-Wl,--start-group -Wl,-lstdc++ -Wl,--end-group"
  ;
