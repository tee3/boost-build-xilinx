import ../../xsdk ;

local xsdk-root = [ xsdk.root ] ;

local hdf = $(xsdk-root)/data/embeddedsw/lib/hwplatform_templates/ZCU102_hw_platform/system.hdf ;

if ! $(xsdk-root)
{
  errors.user-error "The XSDK root is not defined, so the HDF file is not available." ;
}

# @todo add more configurations
xsdkws ws
  : # sources
    $(hdf)
  : # requirements
    <target-os>freertos

    <link>static

    <instruction-set>cortex-r5

    <xsdk-template>"OpenAMP RPC Demo"

    <xsdk-library>libmetal
    <xsdk-library>openamp
  : # default-build
  : # usage-requirements
  ;

exe example
  : # sources
    rpc-demo.cpp

    ws
  : # requirements
    <target-os>freertos

    <link>static

    <instruction-set>cortex-r5

  : # default-build
  : # usage-requirements
  ;
