# Copyright 2019 Thomas Brown
# Distributed under the Boost Software License, Version 1.0. (See
# accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt)

path-constant root : ../.. ;

project
  : default-build
    <platform>freertos--cortex-r5+vfpv3-d16-hard
    <platform>freertos--cortex-r5+vfpv3-d16-softfp
  : requirements
    <link>static
  ;

explicit ws ;
xsdkws ws
  : # sources
    $(zcu102-hdf)
  : # requirements
    <xsdk-template>"OpenAMP RPC Demo"

    <xsdk-library>libmetal
    <xsdk-library>openamp
  : # default-build
  : # usage-requirements
  ;

exe rpc-demo
  : # sources
    rpc_demo.c
    rpmsg-rpc-demo.h

    helper.c

    platform_info.c
    platform_info.h

    rsc_table.c
    rsc_table.h

    ws
  : # requirements
    <linkflags>"-Wl,-T -Wl,$(root)/test/zcu102-rpc-demo/lscript.ld"

    <dependency>ws
  ;
